<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GeoKahoot — Türkiye İl Tahmin Oyunu</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- SETUP PAGE -->
  <div id="setupPage" class="page">
    <div class="card">
      <div class="setup-header">
        <h1>GeoKahoot</h1>
        <p class="subtitle">Haritada Türkiye illerini bulun — tek oynarken ya da arkadaşlarla oynayın.</p>
      </div>

      <label>Oyuncu Sayısı:
        <select id="playerCount">
          <option value="1">1</option>
          <option value="2" selected>2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
      </label>

      <div id="playerNames"></div>

      <label>Zorluk Seviyesi:
        <select id="difficulty">
          <option value="easy">Kolay</option>
          <option value="hard" selected>Zor</option>
        </select>
      </label>

      <label>Oyuncu başına zaman (saniye):
        <input id="timePerPlayer" type="number" min="10" max="300" value="60">
      </label>

      <div class="row actions">
        <button id="startBtn" class="primary">Oyunu Başlat</button>
        <div class="secondaryGroup">
          <button id="rulesBtn" class="ghost">Kurallar</button>
        </div>
      </div>

      <small class="muted">GeoJSON dosyanız <code>geojson/turkiye.geojson</code> klasörüne ekleyin.</small>
    </div>
  </div>

  <!-- GAME PAGE -->
  <div id="gamePage" class="page" style="display:none;">
    <div id="sidebar">
      <div class="card">
        <h2 id="turnTitle">Sıra</h2>

        <div class="stats">
          <div>Zaman: <span id="timer">0</span>s</div>
          <div>Skor: <span id="score">0</span></div>
          <div>Can: <span id="lives">0</span></div>
        </div>

        <div id="hintBox">
          <h4>İpucu</h4>
          <div id="hintText">Bekleniyor...</div>
        </div>

        <div class="controls">
          <button id="skipBtn" disabled>Geç (-2)</button>
          <button id="finishTurnBtn" disabled>Turu Bitir</button>
        </div>

        <div id="eventsBox">
          <h4>Olaylar</h4>
          <ul id="events"></ul>
        </div>

        <div id="endActions" style="display:none">
          <h4>Oyun Sonucu</h4>
          <div id="resultText"></div>
          <div class="leader-form">
            <input id="saveName" placeholder="Skoru kaydetmek için isim girin">
            <button id="saveScoreBtn">Skoru Kaydet</button>
            <button id="restartBtn">Oyunu Yeniden Başlat</button>
          </div>
        </div>
      </div>

      <div class="card small">
        <h4>Puan Tablosu</h4>
        <ol id="leaders"></ol>
      </div>
    </div>

    <div id="mapWrap">
      <div id="map"></div>
    </div>
  </div>

  <!-- Oyun sonu kazanan ekranı -->
  <div id="winnerOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:99999; align-items:center; justify-content:center;">
    <div style="background:#fff; padding:20px; border-radius:8px; width:320px; text-align:center;">
      <h2 id="winnerTitle">Kazanan</h2>
      <p id="winnerText" style="font-size:18px; margin:12px 0">Oyuncu — 0 puan</p>
      <div style="display:flex; gap:8px; justify-content:center;">
        <button id="overlayRestartBtn">Yeniden Başlat</button>
        <button id="overlayCloseBtn">Kapat</button>
      </div>
    </div>
  </div>

  <!-- libs -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

  <!-- main script -->
  <script src="script.js"></script>
</body>
</html>

